{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export function imageTemplate(item) {\n    return `<li class=\"gallery-item\">\n        <a href=\"${item.largeImageURL}\" class=\"gallery-link\" >\n        <img class=\"image-item\" src=\"${item.webformatURL}\" alt=\"${item.tags}\" width=\"360\" height=\"200\" />\n        </a>\n        <div class=\"wrap\">\n          <div>\n            <h4 class=\"image-title\">likes</h4>\n            <p class=\"image-description\">${item.likes}</p>\n          </div>\n          <div>\n            <h4 class=\"image-title\">Views</h4>\n            <p class=\"image-description\">${item.views}</p>\n          </div>\n          <div>\n            <h4 class=\"image-title\">Comments</h4>\n            <p class=\"image-description\">${item.comments}</p>\n          </div>\n          <div>\n            <h4 class=\"image-title\">Downloads</h4>\n            <p class=\"image-description\">${item.downloads}</p>\n          </div>\n        </div>\n      </li>`\n}\n\nexport function imagesTemplate(arr) {\n  return arr.map(imageTemplate).join('')\n}\n\n\nexport function showLoader(loader) {\n  loader.classList.remove('hidden');\n}\n\nexport function hideLoader(loader) {\n  loader.classList.add('hidden');\n}\n\nexport function showBtn(jsBtn) {\n  jsBtn.classList.remove('hidden')\n}\n\nexport function hideBtn(jsBtn) {\n  jsBtn.classList.add('hidden')\n}\n","import axios from \"axios\";\n\n\n\nconst BASE_URL = 'https://pixabay.com/api/'\nconst API_KEY = '44483341-a81d0a92f1c16412fe8933c44'\n\n\nconst pixabayAPI = axios.create({\n    baseURL: 'https://pixabay.com/api/',\n    params: {\n        key: '44483341 - a81d0a92f1c16412fe8933c44'\n    }\n\n})\n\n    export async function getImages(userInput, currentPage) {\n        const params = new URLSearchParams({\n        key: API_KEY,\n        q: userInput,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: currentPage,\n        per_page: 15,\n        })\n        \n        \n\n        try {\n            const response = await pixabayAPI.get('', {params})\n            const result = response.data\n            return result\n        } catch (error) {\n            throw new Error(error.message);\n        }\n        \n    }\n        \n    ","import {\n    imageTemplate,\n    imagesTemplate,\n    showLoader,\n    hideLoader,\n    showBtn,\n    hideBtn,\n} from \"./js/render-functions\";\nimport { getImages } from \"./js/pixabay-api\"\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from 'simplelightbox';\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from \"axios\";\n\n\nconst refs = {\nformEl:document.querySelector('.form'),\ngalleryEl:document.querySelector('.gallery-list'),\nloader:document.querySelector('.loader'),\njsBtn:document.querySelector('.js-btn')\n}\n\n\nconst lightbox = new SimpleLightbox('.gallery-list a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n    });\n\nlet currentPage = 1;\nlet userInput = '';\nlet maxPage;\n\nrefs.formEl.addEventListener('submit', async e => {\n    e.preventDefault()\n\n    const formData = new FormData(refs.formEl)\n    userInput = formData.get('userInput').trim()\n\n    if (userInput === '') {\n        iziToast.warning({\n            title: 'Empty search',\n            message: \"Please enter a search query!\",\n        });\n        return;\n    }\n    showLoader(refs.loader)\n    try {\n        currentPage = 1;\n        const data = await getImages(userInput, currentPage)\n        maxPage = Math.ceil(data.totalHits / 15)\n        if (data.hits.length !== 0) {\n            const markup = imagesTemplate(data.hits)\n            refs.galleryEl.innerHTML = markup\n            lightbox.refresh()\n        } else {\n            iziToast.warning({\n                title: 'No Results',\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n            });\n            refs.galleryEl.innerHTML = ''\n        }\n    } catch (err) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Something went wrong. Please try again later.',\n        })\n        console.log(err);\n    } finally {\n        hideLoader(refs.loader)\n        refs.formEl.reset()\n        checkMaxPage()\n    }\n\n})\n\nrefs.jsBtn.addEventListener('click', async (e) => {\n    hideBtn(refs.jsBtn)\n    showLoader(refs.loader)\n    currentPage++\n    const data = await getImages(userInput, currentPage)\n    const markup = imagesTemplate(data.hits)\n    refs.galleryEl.insertAdjacentHTML('beforeend', markup)\n    lightbox.refresh()\n    checkMaxPage()\n    scrollPage()\n    hideLoader(refs.loader)\n\n\n    \n})\n\nfunction checkMaxPage() {\n    if (currentPage < maxPage) {\n        showBtn(refs.jsBtn)\n    } else {\n        infoMessage()\n        hideBtn(refs.jsBtn)\n    }\n}\n\nfunction infoMessage() {\n    if (maxPage) {\n        iziToast.info({\n            title: 'Last page',\n            message: \"We're sorry, but you've reached the end of search results.\"\n        })\n    }\n}\n\nfunction scrollPage() {\n    const height = refs.galleryEl.children[0].getBoundingClientRect().height\n    scrollBy({\n        'top': height * 3,\n        'behavior':'smooth'\n    })\n}"],"names":["imageTemplate","item","imagesTemplate","arr","showLoader","loader","hideLoader","showBtn","jsBtn","hideBtn","API_KEY","pixabayAPI","axios","getImages","userInput","currentPage","params","error","refs","lightbox","SimpleLightbox","maxPage","iziToast","data","markup","err","checkMaxPage","scrollPage","infoMessage","height"],"mappings":"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"}